{# 
    Information for Facebook, Twitter, LinkedIn and other social sharing.

    Reads src/config/social.js
#}

{# Generic HTML <head> data #}
{% set page_title=title %}
{% set page_description=description %}

{% set page_organization_name=social.general.site_name %}
{% set page_organization_logo=social.general.default_logo|url %}
{% set page_organization_logo_width=social.general.default_logo_width %}
{% set page_organization_logo_height=social.general.default_logo_width %}

{# 

  Facebook 
  
#}
{% set page_facebook_app_id=social.facebook_app_id %}
{% set page_facebook_name=social.facebook.name %}

{# Per page OpenGraph type override #}
{% set page_facebook_type=facebook_type or social.facebook.type %}
{% set page_facebook_name=social.facebook.name %}

{#
  Resolving which image is going to be visible
#} 

{% if not page_logo %}
  {% set page_facebook_image=social.facebook.logo %}
  {% set page_facebook_image_width=social.facebook.logo_width %}
  {% set page_facebook_image_height=social.facebook.logo_height %}
{% else %}
  {% set page_facebook_image=page_logo %}
  {% set page_facebook_image_width=page_logo_width %}
  {% set page_facebook_image_height=page_logo_height %}
{% endif %}

{# Use page specific logo or default to our logo #}
{% set page_logo=page_logo or social.general.default_logo %}
{% set page_logo_width=page_logo_width or social.general.default_logo_width %}
{% set page_logo_height=page_logo_height or social.general.default_logo_height %}

{# Use page specific logo or default to our logo #}
{% set page_logo=page_logo|default(default_logo) %}
{% set page_logo_width=512 %}
{% set page_logo_height=512 %}

{% if not page_twitter_image %}
  {% set page_twitter_image=page_logo %}
{% endif %}

{# HTML metadata for Google, Facebook and Twitter #}
<title>{{ page_title }}</title>
<meta name="description" content="{{ page_description }}">

{# 
  Facebook metadata, see social.js for debug instructions 
#}

<meta property="og:title" content="{{ page_title }}">
<meta property="og:description" content="{{ page_description }}" />
<meta property="og:site_name" content="{{ page_facebook_name }}" />

{% if page_facebook_app_id %}
  <meta property="fb:app_id" content="{{ page_facebook_app_id }}" />
{% endif %}  

{# 1200x630 preferred #}
{% if page_facebook_image %}
  <meta property="og:image" content="{{ page_facebook_image }}" />
  {% if page_facebook_image_width %}
    <meta property="og:image:width" content="{{ page_facebook_image_width }}" />
    <meta property="og:image:height" content="{{ page_facebook_image_height }}" />
  {% endif %}  
{% endif %}

<meta property="og:type" content="{{ page_facebook_type }}" />

{% if author %}
  <meta property="og:author" content="{{ author }}" />
{% endif %}

{% if date %}
  {# Needs iso8601 #}
  <meta property="og:article:published_time" content="{{ date.toISOString() }}" />
{% endif %}
